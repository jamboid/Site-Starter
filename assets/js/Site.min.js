var Site=Site||{};Site.init=function(e){"use strict";var t={};t.init=function(){e(document).ready(function(){Site.utils.init();Site.layout.init();Site.events.init();Site.showhide.init();Site.forms.init();Site.images.init();Site.analytics.init()})};return t.init()}(jQuery);var Site=Site||{};Site.utils=function(e){"use strict";var t=!0,n=function(e){t===!0&&typeof console!==undefined&&console.log(e)},r=function(t){var n=t,r=0,i=0;e(n).css("min-height",0);e(n).each(function(){i=e(this).height();i>r&&(r=i)});return r},i=function(t){var n=t,i=r(n);r(n);e(n).css("min-height",i)},s=function(){var e=document.createElement("input");return"placeholder"in e},o=function(){var e=[],t,n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++){t=n[r].split("=");e.push(t[0]);e[t[0]]=t[1]}return e},u=function(t){var n=e(t),r=e(window),i=r.height(),s=r.scrollTop(),o=n.offset(),u=o.top;return s+i>u&&u+n.height()>s?!0:!1},a=function(t){e(t).removeAttr("style")},f=function(t){var n=e(t);n.filter(":nth-child(2n-1)").addClass("odd");n.filter(":nth-child(2n)").addClass("even")},l=function(){Site.utils.cl("Site.utils.init called")};return{cl:n,resetStyles:a,equaliseMinHeights:i,placeholderIsSupported:s,getURLQueryString:o,isElementInView:u,addOddAndEvenClasses:f,init:l}}(jQuery);var Site=Site||{};Site.layout=function(e){"use strict";var t={},n=function(){},r=function(){Site.utils.cl("Site.layout initialised")};return{init:r}}(jQuery);var Site=Site||{};Site.events=function(e){"use strict";var t={},n=function(){FastClick&&FastClick.attach(document.body)},r=function(){Site.utils.cl("Site.events initialised")};return{init:r}}(jQuery);var Site=Site||{};Site.showhide=function(e){"use strict";var t={selPlugin:"[data-plugin=showhide]",selAction:"[data-action=toggle]",selContent:"[data-content=showhide]"},n=function(e){Site.utils.cl("Triggering layout event");Site.images.updateLazyImages!==undefined&&Site.images.updateLazyImages()},r=function(r,i){var s=r,o=e(s).find(t.selAction).eq(0),u=e(s).find(t.selContent).eq(0),a=i||{},f=a.open||!1,l=a.animate||!1,c=a.speed||200;f===!1&&e(s).addClass("isClosed");e(o).bind("tap",function(t){t.preventDefault();if(e(s).hasClass("isClosed"))if(l===!0)e(u).slideDown(function(){e(s).removeClass("isClosed");n(e(s))});else{e(u).show();e(s).removeClass("isClosed");n(e(s))}else if(l===!0)e(u).slideUp(function(){e(s).addClass("isClosed");n(e(s))});else{e(u).hide();e(s).addClass("isClosed");n(e(s))}})},i=function(t){var n=t;e(n).find("li a.active").length>0&&e(n).addClass("isActive")},s=function(){var n=e(t.selPlugin);e(n).each(function(){var t=e(this).data("plugin-config");Site.utils.cl(t);i(this);r(this,t)})},o=function(){Site.utils.cl("Site.showhide.init called");s()};return{init:o}}(jQuery);var Site=Site||{};Site.forms=function(e){"use strict";var t=Site.utils.placeholderIsSupported(),n=function(){e(".form-item").each(function(){var t=e(this).find("input, textarea").not("input[type=submit]").eq(0),n=e(this).find("label").eq(0),r=e(n).text(),i=e(r).find(".form-required");r=e(n).text();e(t).attr("placeholder",r)});t||r()},r=function(){createText=function(e,t){if(t.attr("value")===e||t.attr("value").length===0){t.attr("value",e);t.addClass("empty")}},removeText=function(e,t){var n=t.attr("value");if(n===e){t.attr("value","");t.removeClass("empty")}},restoreText=function(e,t){var n=t.attr("value");if(n!==undefined&&n!=="")t.attr("value",n);else if(n===undefined||n===""){t.attr("value",e);t.addClass("empty")}};Site.utils.cl(t);if(!t){Site.utils.cl("Placeholder not supported");e("input[placeholder], textarea[placeholder]").each(function(){var t=e(this).attr("placeholder");e(this).each(function(){createText(t,e(this))});e(this).focus(function(){removeText(t,e(this))});e(this).blur(function(){restoreText(t,e(this))})})}},i=function(){Site.utils.cl("Site.forms initialised")};return{init:i}}(jQuery);var Site=Site||{};Site.images=function(e){"use strict";var t={},n=e(".lazyLoader"),r=function(t){var n=e(t),r=n.data("loading"),i=n.find("noscript").eq(0),s=i.parent(),o=i.data("src"),u=i.data("width"),a=i.data("alt"),f=new Image,l=function(){a===""&&(a="gallery image");e(f).attr("width",u).attr("alt",a);s.prepend(f).addClass("imageLoaded");window.setTimeout(function(){s.addClass("imageDisplayed")},100);Site.utils.cl("Image loaded and displayed")},c=function(){f.src=o;e(f).imagesLoaded(l)},h=function(){Site.utils.isElementInView(n)&&c()};this.bindViewEvents=function(){r==="click"?n.bind("tap",function(){n.hasClass("imageLoaded")||c()}):r==="view"?e(window).on("scroll debouncedresize",function(){n.hasClass("imageLoaded")||h()}):c();n.on("layoutUpdate",function(){Site.utils.cl("listening for layoutUpdate event");h()})}},i=function(){n.each(function(){var e=new r(this);e.bindViewEvents()})},s=function(){n.trigger("layoutUpdate")},o=function(){Site.utils.cl("Site.images initialised");i()};return{init:o,updateLazyImages:s}}(jQuery);var Site=Site||{};Site.analytics=function(e){"use strict";var t={},n=function(e){var t=e;typeof ga!="undefined"?ga("send","pageview",t):typeof _gaq!="undefined"?_gaq.push(["trackPageview"],e):Site.utils.cl("Google Analytics not available")},r=function(e,t,n){var r=e,i=t,s=n;typeof ga!="undefined"?ga("send","event",r,i,s):typeof _gaq!="undefined"?_gaq.push(["_trackEvent",r,i,s]):Site.utils.cl("Google Analytics not available")},i=function(){e("a[href$='pdf']").on("click",function(){Site.utils.cl("PDF link tracked");var t=e(this).attr("href");n(t)})},s=function(){var t=e(window).width(),n;t>768?n="Desktop":t>520?n="Tablet":n="Phone";ga!=="undefined"?ga("set","dimension1",n):typeof _gaq!="undefined"&&_gaq.push(["_setCustomVar",1,"Layout",n,3])},o=function(){s()},u=function(){Site.utils.cl("Site.analytics.init called");i()};return{init:u,trackPageView:n,trackPageEvent:r,trackPageLoadInformation:o}}(jQuery);