/*!
 * EventEmitter v4.2.4 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function t(){return this[e].apply(this,arguments)}}var i=e.prototype;i.getListeners=function r(e){var t=this._getEvents(),n,i;if("object"==typeof e){n={};for(i in t)t.hasOwnProperty(i)&&e.test(i)&&(n[i]=t[i])}else n=t[e]||(t[e]=[]);return n},i.flattenListeners=function o(e){var t=[],n;for(n=0;n<e.length;n+=1)t.push(e[n].listener);return t},i.getListenersAsObject=function s(e){var t=this.getListeners(e),n;return t instanceof Array&&(n={},n[e]=t),n||t},i.addListener=function a(e,n){var i=this.getListenersAsObject(e),r="object"==typeof n,o;for(o in i)i.hasOwnProperty(o)&&-1===t(i[o],n)&&i[o].push(r?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function c(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function l(e){return this.getListeners(e),this},i.defineEvents=function u(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function d(e,n){var i=this.getListenersAsObject(e),r,o;for(o in i)i.hasOwnProperty(o)&&(r=t(i[o],n),-1!==r&&i[o].splice(r,1));return this},i.off=n("removeListener"),i.addListeners=function h(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function f(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function g(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function p(e){var t=typeof e,n=this._getEvents(),i;if("string"===t)delete n[e];else if("object"===t)for(i in n)n.hasOwnProperty(i)&&e.test(i)&&delete n[i];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function v(e,t){var n=this.getListenersAsObject(e),i,r,o,s;for(o in n)if(n.hasOwnProperty(o))for(r=n[o].length;r--;)i=n[o][r],i.once===!0&&this.removeListener(e,i.listener),s=i.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=n("emitEvent"),i.emit=function m(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function E(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function S(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function y(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(e){var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(t,n,i){t[n+i]=i.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,i.handleEvent.call(i,t)}:function(){var n=e.event;n.target=n.target||n.srcElement,i.call(t,n)},t.attachEvent("on"+n,t[n+i])});var i=function(){};t.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var r={bind:n,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",r):e.eventie=r}(this),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===c.call(e)}function i(e){var t=[];if(n(e))t=e;else if("number"==typeof e.length)for(var i=0,r=e.length;r>i;i++)t.push(e[i]);else t.push(e);return t}function r(e,n){function r(e,n,s){if(!(this instanceof r))return new r(e,n);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=i(e),this.options=t({},this.options),"function"==typeof n?s=n:t(this.options,n),s&&this.on("always",s),this.getImages(),o&&(this.jqDeferred=new o.Deferred);var a=this;setTimeout(function(){a.check()})}function c(e){this.img=e}r.prototype=new e,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);for(var i=n.querySelectorAll("img"),r=0,o=i.length;o>r;r++){var s=i[r];this.addImage(s)}}},r.prototype.addImage=function(e){var t=new c(e);this.images.push(t)},r.prototype.check=function(){function e(e,r){return t.options.debug&&a&&s.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},r.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify(t,e)})},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},o&&(o.fn.imagesLoaded=function(e,t){var n=new r(this,e,t);return n.jqDeferred.promise(o(this))});var l={};return c.prototype=new e,c.prototype.check=function(){var e=l[this.img.src];if(e)return void this.useCached(e);if(l[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var t=this.proxyImage=new Image;n.bind(t,"load",this),n.bind(t,"error",this),t.src=this.img.src},c.prototype.useCached=function(e){if(e.isConfirmed)this.confirm(e.isLoaded,"cached was confirmed");else{var t=this;e.on("confirm",function(e){return t.confirm(e.isLoaded,"cache emitted confirmed"),!0})}},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},c.prototype.unbindProxyEvents=function(){n.unbind(this.proxyImage,"load",this),n.unbind(this.proxyImage,"error",this)},r}var o=e.jQuery,s=e.console,a="undefined"!=typeof s,c=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],r):e.imagesLoaded=r(e.EventEmitter,e.eventie)}(window),function(e){var t=e.event,n,i;n=t.special.debouncedresize={setup:function(){e(this).on("resize",n.handler)},teardown:function(){e(this).off("resize",n.handler)},handler:function(e,r){var o=this,s=arguments,a=function(){e.type="debouncedresize",t.dispatch.apply(o,s)};i&&clearTimeout(i),r?a():i=setTimeout(a,n.threshold)},threshold:150}}(jQuery),function(e){e.fn.fitText=function(t,n){var i=t||1,r=e.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},n);return this.each(function(){var t=e(this),n=function(){t.css("font-size",Math.max(Math.min(t.width()/(10*i),parseFloat(r.maxFontSize)),parseFloat(r.minFontSize)))};n(),e(window).on("resize.fittext orientationchange.fittext",n)})}}(jQuery),function(e,t){"use strict";function n(){i.READY||(i.event.determineEventTypes(),i.utils.each(i.gestures,function(e){i.detection.register(e)}),i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0)}var i=function(e,t){return new i.Instance(e,t||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in e,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&e.navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=e.document,i.plugins=i.plugins||{},i.gestures=i.gestures||{},i.READY=!1,i.utils={extend:function a(e,n,i){for(var r in n)e[r]!==t&&i||(e[r]=n[r]);return e},each:function(e,n,i){var r,o;if("forEach"in e)e.forEach(n,i);else if(e.length!==t){for(r=0,o=e.length;o>r;r++)if(n.call(i,e[r],r,e)===!1)return}else for(r in e)if(e.hasOwnProperty(r)&&n.call(i,e[r],r,e)===!1)return},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function c(e){var t=[],n=[];return i.utils.each(e,function(e){t.push("undefined"!=typeof e.clientX?e.clientX:e.pageX),n.push("undefined"!=typeof e.clientY?e.clientY:e.pageY)}),{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function l(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function u(e,t){var n=t.pageY-e.pageY,i=t.pageX-e.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function d(e,t){var n=Math.abs(e.pageX-t.pageX),r=Math.abs(e.pageY-t.pageY);return n>=r?e.pageX-t.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:e.pageY-t.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function h(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},getScale:function f(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function g(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function p(e){return e==i.DIRECTION_UP||e==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function v(e,t){t&&e&&e.style&&(i.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(n){i.utils.each(t,function(t){n&&(t=n+t.substring(0,1).toUpperCase()+t.substring(1)),t in e.style&&(e.style[t]=t)})}),"none"==t.userSelect&&(e.onselectstart=function(){return!1}),"none"==t.userDrag&&(e.ondragstart=function(){return!1}))}},i.Instance=function(e,t){var r=this;return n(),this.element=e,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),t||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(e,i.EVENT_START,function(e){r.enabled&&i.detection.startDetect(r,e)}),this},i.Instance.prototype={on:function m(e,t){var n=e.split(" ");return i.utils.each(n,function(e){this.element.addEventListener(e,t,!1)},this),this},off:function E(e,t){var n=e.split(" ");return i.utils.each(n,function(e){this.element.removeEventListener(e,t,!1)},this),this},trigger:function S(e,t){t||(t={});var n=i.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var r=this.element;return i.utils.hasParent(t.target,r)&&(r=t.target),r.dispatchEvent(n),this},enable:function y(e){return this.enabled=e,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(e,t,n){var r=t.split(" ");i.utils.each(r,function(t){e.addEventListener(t,n,!1)})},onTouch:function _(e,t,n){var a=this;this.bindDom(e,i.EVENT_TYPES[t],function c(l){var u=l.type.toLowerCase();if(!u.match(/mouse/)||!s){u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===l.which?o=!0:u.match(/mouse/)&&!l.which&&(o=!1),u.match(/touch|pointer/)&&(s=!0);var d=0;o&&(i.HAS_POINTEREVENTS&&t!=i.EVENT_END?d=i.PointerEvent.updatePointer(t,l):u.match(/touch/)?d=l.touches.length:s||(d=u.match(/up/)?0:1),d>0&&t==i.EVENT_END?t=i.EVENT_MOVE:d||(t=i.EVENT_END),(d||null===r)&&(r=l),n.call(i.detection,a.collectEventData(e,t,a.getTouchList(r,t),l)),i.HAS_POINTEREVENTS&&t==i.EVENT_END&&(d=i.PointerEvent.updatePointer(t,l))),d||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function w(){var e;e=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=e[0],i.EVENT_TYPES[i.EVENT_MOVE]=e[1],i.EVENT_TYPES[i.EVENT_END]=e[2]},getTouchList:function T(e){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():e.touches?e.touches:(e.identifier=1,[e])},collectEventData:function b(e,t,n,r){var o=i.POINTER_TOUCH;return(r.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,r))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(n),timeStamp:(new Date).getTime(),target:r.target,touches:n,eventType:t,pointerType:o,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return i.utils.each(e.pointers,function(e){t.push(e)}),t},updatePointer:function(e,t){return e==i.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,r={};return r[i.POINTER_MOUSE]=n===t.MSPOINTER_TYPE_MOUSE||n===i.POINTER_MOUSE,r[i.POINTER_TOUCH]=n===t.MSPOINTER_TYPE_TOUCH||n===i.POINTER_TOUCH,r[i.POINTER_PEN]=n===t.MSPOINTER_TYPE_PEN||n===i.POINTER_PEN,r[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function C(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:i.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function D(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst.options;return i.utils.each(this.gestures,function(n){return this.stopped||t[n.name]===!1||n.handler.call(n,e,this.current.inst)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=e),e.eventType==i.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function N(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function I(e){var t=this.current.startEvent;!t||e.touches.length==t.touches.length&&e.touches!==t.touches||(t.touches=[],i.utils.each(e.touches,function(e){t.touches.push(i.utils.extend({},e))}));var n=e.timeStamp-t.timeStamp,r=e.center.pageX-t.center.pageX,o=e.center.pageY-t.center.pageY,s=i.utils.getVelocity(n,r,o),a,c;return"end"===e.eventType?(a=this.current.lastEvent&&this.current.lastEvent.interimAngle,c=this.current.lastEvent&&this.current.lastEvent.interimDirection):(a=this.current.lastEvent&&i.utils.getAngle(this.current.lastEvent.center,e.center),c=this.current.lastEvent&&i.utils.getDirection(this.current.lastEvent.center,e.center)),i.utils.extend(e,{deltaTime:n,deltaX:r,deltaY:o,velocityX:s.x,velocityY:s.y,distance:i.utils.getDistance(t.center,e.center),angle:i.utils.getAngle(t.center,e.center),interimAngle:a,direction:i.utils.getDirection(t.center,e.center),interimDirection:c,scale:i.utils.getScale(t.touches,e.touches),rotation:i.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function x(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),i.utils.extend(i.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function O(e,t){if(i.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),void(this.triggered=!1);if(!(t.options.drag_max_touches>0&&e.touches.length>t.options.drag_max_touches))switch(e.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(e.distance<t.options.drag_min_distance&&i.detection.current.name!=this.name)return;if(i.detection.current.name!=this.name&&(i.detection.current.name=this.name,t.options.correct_for_drag_min_distance&&e.distance>0)){var n=Math.abs(t.options.drag_min_distance/e.distance);i.detection.current.startEvent.center.pageX+=e.deltaX*n,i.detection.current.startEvent.center.pageY+=e.deltaY*n,e=i.detection.extendEventData(e)}(i.detection.current.lastEvent.drag_locked_to_axis||t.options.drag_lock_to_axis&&t.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;e.drag_locked_to_axis&&r!==e.direction&&(e.direction=i.utils.isVertical(r)?e.deltaY<0?i.DIRECTION_UP:i.DIRECTION_DOWN:e.deltaX<0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),t.trigger(this.name+e.direction,e),(t.options.drag_block_vertical&&i.utils.isVertical(e.direction)||t.options.drag_block_horizontal&&!i.utils.isVertical(e.direction))&&e.preventDefault();break;case i.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function L(e,t){switch(e.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case i.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Release={name:"release",index:1/0,handler:function P(e,t){e.eventType==i.EVENT_END&&t.trigger(this.name,e)}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function k(e,t){if(e.eventType==i.EVENT_END){if(t.options.swipe_max_touches>0&&e.touches.length<t.options.swipe_min_touches&&e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function V(e,t){if(e.eventType==i.EVENT_END&&"touchcancel"!=e.srcEvent.type){var n=i.detection.previous,r=!1;if(e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance)return;n&&"tap"==n.name&&e.timeStamp-n.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),r=!0),(!r||t.options.tap_always)&&(i.detection.current.name="tap",t.trigger(i.detection.current.name,e))}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function M(e,t){return t.options.prevent_mouseevents&&e.pointerType==i.POINTER_MOUSE?void e.stopDetect():(t.options.prevent_default&&e.preventDefault(),void(e.eventType==i.EVENT_START&&t.trigger(this.name,e)))}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function R(e,t){if(i.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),void(this.triggered=!1);if(!(e.touches.length<2))switch(t.options.transform_always_block&&e.preventDefault(),e.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var n=Math.abs(1-e.scale),r=Math.abs(e.rotation);if(n<t.options.transform_min_scale&&r<t.options.transform_min_rotation)return;i.detection.current.name=this.name,this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),r>t.options.transform_min_rotation&&t.trigger("rotate",e),n>t.options.transform_min_scale&&(t.trigger("pinch",e),t.trigger("pinch"+(e.scale<1?"in":"out"),e));break;case i.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return i}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i:e.Hammer=i}(this),function(e,t){"use strict";function n(e,n){e.event.bindDom=function(e,i,r){n(e).on(i,function(e){var n=e.originalEvent||e;n.pageX===t&&(n.pageX=e.pageX,n.pageY=e.pageY),n.target||(n.target=e.target),n.which===t&&(n.which=n.button),n.preventDefault||(n.preventDefault=e.preventDefault),n.stopPropagation||(n.stopPropagation=e.stopPropagation),r.call(this,n)})},e.Instance.prototype.on=function(e,t){return n(this.element).on(e,t)},e.Instance.prototype.off=function(e,t){return n(this.element).off(e,t)},e.Instance.prototype.trigger=function(e,t){var i=n(this.element);return i.has(t.target).length&&(i=n(t.target)),i.trigger({type:e,gesture:t})},n.fn.hammer=function(t){return this.each(function(){var i=n(this),r=i.data("hammer");r?r&&t&&e.utils.extend(r.options,t):i.data("hammer",new e(this,t||{}))})}}"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["hammer","jquery"],n):n(e.Hammer,e.jQuery||e.Zepto)}(this),function(e){"use strict";var t={},n={},i=!1,r=function(e){return e.slice(0)};e.subscribe=function(i,r,o){var s,a={};return o=o||n,"string"===e.type(i)&&e.isFunction(r)?(s=i.split(" "),e.each(s,function(e,n){return""===n||a[n]?!0:(a[n]=!0,t[n]||(t[n]=[]),void t[n].push([r,o]))}),{topics:i,callback:r,context:o}):null},e.unsubscribe=function(i,r,o){var s,a={};return i&&("string"===e.type(i)||i.topics&&"string"===e.type(i.topics))?(i.topics&&(r=r||i.callback,o=o||i.context,i=i.topics),o=o||n,s=i.split(" "),e.each(s,function(n,i){var s=t[i];return""===i||!s||a[i]?!0:(a[i]=!0,void(r&&e.isFunction(r)?e.each(s,function(e,t){return t[0]===r&&t[1]===o?(s.splice(e,1),!1):void 0}):delete t[i]))}),e):e},e.publish=function(n,i){if(!n||"string"!==e.type(n))return e;var o=n.split(" ");return e.each(o,function(n,o){if(""===o)return!0;if(t[o]){var s=r(t[o]);e.each(s,function(e,t){t[0].call(t[1],o,i)})}}),e}}(jQuery);var Site=Site||{};Site.init=function(e){"use strict";var t={};return t.init=function(){e(document).ready(function(){Site.utils.init(),Site.events.init(),Site.analytics.init(),Site.layout.init(),Site.navigation.init(),Site.images.init(),Site.media.init(),Site.showhide.init(),Site.carousel.init(),Site.scroller.init(),Site.filter.init(),Site.loading.init()})},t.init()}(jQuery);var Site=Site||{};Site.utils=function(e){"use strict";var t=!0,n=function(e){t===!0&&window.console&&console.log&&console.log(e)},i=function(t){var n=t,i=0,r=0;return e(n).css("min-height",0),e(n).each(function(){r=e(this).height(),r>i&&(i=r)}),i},r=function(t){var n=t,r=i(n);i(n),e(n).css("min-height",r)},o=function(){var e=document.createElement("input");return"placeholder"in e},s=function(){for(var e=[],t,n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++)t=n[i].split("="),e.push(t[0]),e[t[0]]=t[1];return e},a=function(t){var n=e(t),i=e(window),r=i.height(),o=i.scrollTop(),s=n.offset(),a=s.top,c=n.height();return o+r>a&&a+c>o?!0:a+c>o&&o+r>a+c?!0:!1},c=function(t){e(t).removeAttr("style")},l=function(t){var n=e(t);n.filter(":nth-child(2n-1)").addClass("odd"),n.filter(":nth-child(2n)").addClass("even")},u=function(){Site.utils.cl("Site.utils.init called")};return{cl:n,resetStyles:c,equaliseMinHeights:r,placeholderIsSupported:o,getURLQueryString:s,isElementInView:a,addOddAndEvenClasses:l,init:u}}(jQuery);var Site=Site||{};Site.events=function(e){"use strict";var t=e("body").eq(0),n=function(){t.on("layoutchange",function(){e.publish("layout/change")}),e(window).on("scroll",function(){e.publish("page/scroll")}),e(window).on("debouncedresize",function(){e.publish("page/resize")})},i=function(n,i,r){t.on(n,i,function(t){e.publish(r)})},r=function(n,i,r){t.on(n,i,function(t){t.preventDefault(),t.stopPropagation(),e(t.target).trigger(r)})},o=function(){Site.utils.cl("Site.events initialised"),n()};return{init:o,createDelegatedEventListener:r,createGlobalMessenger:i}}(jQuery);var Site=Site||{};Site.layout=function(e){"use strict";var t="small",n=function(){var n=function(){var n=e(window).width(),i={small:600,medium:800,large:1200,xlarge:1600};switch(!0){case n<=i.small:t="small";break;case n<=i.medium:t="medium";break;case n<=i.large:t="large";break;case n<=i.xlarge:t="xlarge";break;case n>i.xlarge:t="xxlarge"}},i=function(){e.subscribe("debouncedresize",function(){n()})};this.init=function(){i(),n()}},i=function(){var t=".cpResult .result",n=function(){e(t).fitText(.4,{minFontSize:"100px",maxFontSize:"180px"})};this.init=function(){n()}},r=function(){var t=e(".stFooter").eq(0),n=!1,i=function(){Site.utils.isElementInView(t)&&!n&&(n=!0,Site.analytics.trackPageEvent("Page Navigation","scroll","Footer reached"))},r=function(){e.subscribe("scroll",function(){i()})};this.init=function(){r()}},o=function(){return t},s=function(){Site.utils.cl("Site.layout initialised");var e=new n;e.init();var t=new i;t.init();var o=new r;o.init()};return{init:s,getResponsiveSize:o}}(jQuery);var Site=Site||{};Site.grid=function(e){"use strict";var t={},n="[data-plugin=shgrid]",i="[data-shgrid=cell]",r="[data-plugin=shgrid] [data-shgrid=cell] [data-shgrid=headline]",o="[data-shgrid=content]",s='<div class="cpProfileWindow cp" data-shgrid="window"><div class="in profileInfo"></div></div>',a="[data-shgrid=window]",c=300,l=".gdFlexCell .in",u=375/640,d=750/640,h=function(t){var n=e(t),r=n.find(i),l,u=function(t){var n=e(window).width(),i=e(t).width(),r=Math.round(n/i);return r},d=function(e){var t=e,n=parseInt(r.index(t)+1),i=u(t),o=Math.ceil(n/i)*i,s=o-1;return s>=r.length&&(s=r.length-1),s},h=function(e){var t=e,n=t.indexOf("#"),i,r;return n>0?(i=t.substring(n+1),r=i):r="",r},f=function(){var e=n.find(a);e.length>0&&(Site.utils.cl("current window so update layout"),e.insertAfter(r.eq(d(l))))},g=function(t){var n=t.offset().top,i=e(window).scrollTop();(i>n||"small"===Site.layout.getResponsiveSize())&&e("html, body").animate({scrollTop:n},c)},p=function(t){var n=t.offset().top,i=e(window).scrollTop();e("html, body").scrollTop(n)},v=function(t){var i=t,h=n.find(a),f=i.find(o).clone(),p=e(s),v=u(i);if(Site.utils.cl(v),i.hasClass("isCurrent"))i.removeClass("isCurrent"),n.removeClass("isActive"),v>1?h.slideUp(function(){e(this).remove()}):h.remove(),l=!1;else{if(r.filter(".isCurrent").removeClass("isCurrent"),i.addClass("isCurrent"),n.addClass("isActive"),l=i,h.length>0){var m=h.prev();r.index(m)===d(i)?(h.find(".profileInfo").empty().append(f),g(i)):(v>1?h.slideUp(c,function(){e(this).remove()}):h.remove(),p.insertAfter(r.eq(d(i))),p.find(".profileInfo").append(f),v>1?p.slideDown(c,function(){g(i)}):(p.show(),g(i)))}else p.insertAfter(r.eq(d(i))),p.find(".profileInfo").append(f),v>1?p.slideDown(c,function(){g(i)}):(p.show(),g(i));var E=i.find(".profileDetails .name").text();Site.analytics.trackPageEvent("Staff Page","Show profile",E)}},m=function(){var t=Site.utils.getURLQueryString(),n;if(Site.utils.cl(t),t.person){Site.utils.cl(t.person),n="#"+t.person,e(n).trigger("toggle");var i=window.location.toString();if(i.indexOf("?")>0){var r=i.substring(0,i.indexOf("?"));window.history.replaceState&&window.history.replaceState({},document.title,r)}}},E=function(){var e=n.find(".isCurrent");Site.utils.cl(e),1===e.length&&p(e)},S=function(){n.on("toggle",function(t){t.preventDefault();var n=e(t.target).closest(i);v(n)}),n.on("updatelayout",function(e){e.preventDefault(),f()}),n.on("setposition",function(e){e.preventDefault(),E()})},y=function(){e.subscribe("debouncedresize",function(){e(this).trigger("updatelayout")},n),e.subscribe("pageload",function(){e(this).trigger("setposition")},n)};this.init=function(){S(),y(),m()}},f=function(t){var n=e(t),i=n.width(),r,o=function(){i=n.outerWidth(),r=i*u,n.css("min-height",r)},s=function(){n.on("updatelayout",function(e){e.preventDefault(),o()})},a=function(){e.subscribe("debouncedresize",function(){e(this).trigger("updatelayout")},n)};this.init=function(){o(),s(),a()}},g=function(){Site.events.createDelegatedEventListener("click",r,"toggle")},p=function(){return u},v=function(){Site.utils.cl("Site.grid initialised"),e(n).each(function(){var e=new h(this);e.init()}),e(l).each(function(){var e=new f(this);e.init()}),g()};return{init:v,getSingleCellRatio:p}}(jQuery);var Site=Site||{};Site.filter=function(e){"use strict";var t={plugin:"[data-plugin=filterList]",pluginFilterList:"[data-filter-list=list]",pluginFilterControl:"[data-filter-list=filter]",filterSel:".cp_Filter .filterCategories li, .cp_Filter .filterReset",categorySel:".indexCategory .delta",letterSel:".cp_Filter--a-to-z [data-filter]",itemSel:".categoryList li",transitionSpeed:500},n="inclusive",i=function(i){var s=e(i).find(t.filterSel),a=e(i).find(t.itemSel),c=e(i).find(t.categorySel),l,u=[],d=0,h=function(){e(l).each(function(){var t=e(this).data("filter");u.push(t)}),Site.utils.cl(u),r(u,a,n),u=[],Site.utils.cl(l),e(a).filter(":not(.matched):not(.hidden)").addClass("toHide"),e(c).filter(":visible").each(function(){var n=this;0===e(n).parent().find(".matched").length&&(d++,e(n).hide(t.transitionSpeed,function(){e(n).addClass("hidden"),Site.utils.resetStyles(n),d--}))}),e(c).filter(".hidden").each(function(){var n=this;e(n).parent().find(".matched").length>0&&(d++,e(n).show(t.transitionSpeed,function(){e(n).removeClass("hidden"),Site.utils.resetStyles(n),d--}))}),e(".matched:visible").addClass("active").removeClass("matched"),e(".matched.hidden").each(function(){d++,e(this).show(t.transitionSpeed,function(){e(this).addClass("active").removeClass("matched").removeClass("hidden"),Site.utils.resetStyles(this),d--})}),e(".toHide:visible").each(function(){d++,e(this).hide(t.transitionSpeed,function(){e(this).removeClass("active").addClass("hidden"),o(this),Site.utils.resetStyles(this),d--})})},f=function(){Site.utils.cl("Reset all items to visible"),e(a).filter(".hidden").each(function(){d++,e(this).show(t.transitionSpeed,function(){e(this).removeClass("hidden"),o(a),Site.utils.resetStyles(a),d--})}),e(c).filter(".hidden").each(function(){d++,e(this).show(t.transitionSpeed,function(){e(this).removeClass("hidden"),Site.utils.resetStyles(c),d--})})},g=function(){var t;t="inclusive"==n?"Inclusive":"Exclusive",e(i).find(".filterMode a span").text(t)},p=function(t){var n=t;return d>0?void Site.utils.cl(d):(o(a),e(n).hasClass("filterMode"),e(n).hasClass("filterReset")?(Site.utils.cl("Reset clicked"),e(s).removeClass("active")):e(n).toggleClass("active"),l=e(s).filter(".active"),0===e(l).length?f():h(),void 0)};e(s).on("click",function(e){e.preventDefault(),p(this)}),e(i).find(".filterMode").on("click",function(e){e.preventDefault(),n="inclusive"==n?"exclusive":"inclusive",g(),p(this)}),g()},r=function(t,n,i){var r=t,o=n,s=i;Site.utils.cl(r),e(o).each(function(){var t=this,n=e(this).data("categories"),i=!1,o=!0;n=n.toString(),Site.utils.cl("to string:"),Site.utils.cl(n),e.each(r,function(){n.indexOf(this)>-1?(Site.utils.cl(n.indexOf(t)),Site.utils.cl(this),Site.utils.cl(n),i=!0):"exclusive"==s&&(o=!1)}),i&&o&&e(t).addClass("matched").removeClass("toHide")})},o=function(t){e(t).removeClass("matched").removeClass("toHide").removeClass("active")},s=function(e){Site.utils.cl("Build filter list...");var t=e;i(t)},a=function(){e(t.plugin).each(function(){s(this)})},c=function(){a(),Site.utils.cl("Site.filter initialised")};return{init:c}}(jQuery);var Site=Site||{};Site.carousel=function(e){"use strict";var t={},n="[data-plugin=carousel]",i=function(t){var n=e(t),i=n.find(".slides").eq(0),r=n.find(".slide"),o=r.length,s=n.data("config"),a=s.interval||5e3,c=s.transition||1e3,l,u,d,h,f,g=s.paused||!0,p=function(){g||(f=setTimeout(v,a))},v=function(){u.fadeIn(c,function(){l.removeClass("current"),u.addClass("current").removeClass("next"),Site.utils.resetStyles(u),l=u;var e=r.index(l);o>e+1?(u=l.next(),u.addClass("next")):(u=d,u.addClass("next")),p()
})},m=function(){g?(g=!1,p()):(g=!0,clearTimeout(f))},E=function(){n.on("toggleAutoCycle",function(e){e.preventDefault(),m()})},S=function(){d=r.eq(0),l=d,u=l.next(),l.addClass("current"),u.addClass("next"),E(),p()};this.init=function(){S()}},r=function(){Site.events.createDelegatedEventListener("click","[data-plugin=carousel] .slide a","toggleAutoCycle")},o=function(){Site.utils.cl("Site.carousel initialised"),e(n).each(function(){var e=new i(this);e.init()}),r()};return{init:o}}(jQuery);var Site=Site||{};Site.navigation=function(e){"use strict";var t=".cp_MainNav",n=".wrapper",i=".nvToggle [data-action=toggle]",r="ul.menu",o=200,s="a.inPageLink",a=e("body").eq(0),c=function(t){var n=e(t),i=n.find(r).eq(0),o=n.find("[data-action=toggle]").eq(0),s=Site.grid.getSingleCellRatio(),c,l,u=function(){a.hasClass("navVisible")===!0?a.removeClass("navVisible"):a.addClass("navVisible")},d=function(){a.hasClass("navVisible")===!0&&a.removeClass("navVisible")},h=function(){a.hasClass("navVisible")===!1&&a.addClass("navVisible")},f=function(){var t=e('<div class="cp_SlideMenu">').append(i.clone().addClass("mnSlide"));a.append(t)},g=function(){c=e(window).width(),l=c*s-o.height(),i.css("min-height",l)},p=function(){e.subscribe("page/resize",function(){e(this).trigger("updatelayout")},n),e.subscribe("navigation/close",function(){e(this).trigger("closeMainNav")},n)},v=function(){n.on("toggleMainNav",function(e){e.preventDefault(),u()}),n.on("openMainNav",function(e){e.preventDefault(),h()}),n.on("closeMainNav",function(e){e.preventDefault(),d()}),n.on("updatelayout",function(e){e.preventDefault()})};this.init=function(){v(),p(),f()}},l=function(t){var n=e(t),i=n.attr("href"),r=n.data("query"),o=function(e){var t=e,n=t.indexOf("#"),i,o,s;return n>0?(i=t.substring(0,n),o=t.substring(n+1),s=i+"?"+r+"="+o):s=t,s},s=function(){window.location=o(i)},a=function(){n.on("inpagelink",function(e){e.preventDefault(),s()})};this.init=function(){a()}},u=function(){Modernizr.touch?Site.events.createDelegatedEventListener("click",i,"toggleMainNav"):Site.events.createDelegatedEventListener("click",i,"toggleMainNav"),Site.events.createDelegatedEventListener("click",s,"inpagelink"),Site.events.createGlobalMessenger("click",n,"navigation/close")},d=function(){Site.utils.cl("Site.navigation initialised"),e(t).each(function(){var e=new c(this);e.init()}),e(s).each(function(){var e=new l(this);e.init()}),u()};return{init:d}}(jQuery);var Site=Site||{};Site.scroller=function(e){"use strict";var t={selControls:".scrollControls",selControl:"[data-action]",selScrollerContent:".scrollContent",selScrollerItem:".scrollItem",selScrollerItemFirst:".scrollItem:first-child",selPlugin:"[data-plugin=scroller]"},n=function(n){var i=e(n),r=i.data("config")||{},o=r.timeUnit||250,s=r.maxScroll||4,a=e(t.selScrollerContent,i),c=e(t.selScrollerContent,i),l=!1,u=!0,d=e(t.selControls,i),h,f,g,p,v,m=!1,E=function(){h=a.width(),f=i.find("li").eq(0).width(),g=Math.round(h/f),g>s&&(g=s),p=g*o,v=g*f,g>s&&(g=s),Site.utils.cl("maxScroll: "+s+", Items to scroll: "+g),Site.utils.cl("Scroll width: "+h+", Item Width: "+f),Site.utils.cl("Items to scroll: "+g+", Number of items: "+c.length+", Distance to scroll: "+v),c.length>g?e(r.selControl,d).show():e(r.selControl,d).hide()},S=function(n){var r;l===!1&&(l=!0,"next"===n?(r=e(t.selScrollerItem,i).slice(0,g).clone(),a.append(r),u===!1?(e(t.selScrollerItem,i).slice(0,g).remove(),l=!1):e(t.selScrollerItemFirst,a).animate({marginLeft:-v},p,function(){e(this).removeAttr("style"),e(t.selScrollerItem,i).slice(0,g).remove(),l=!1})):"previous"===n&&(r=e(t.selScrollerItem,i).slice(-g).clone(),u===!1?(a.prepend(r),e(t.selScrollerItem,i).slice(-g).remove(),l=!1):(e(r).eq(0).css("margin-left",-v),a.prepend(r),e(t.selScrollerItemFirst,a).animate({marginLeft:0},p,function(){e(this).removeAttr("style"),e(t.selScrollerItem,i).slice(-g).remove(),l=!1}))))},y=function(){i.on("moveScroller",function(t){t.preventDefault(),void 0!==e(t.target).attr("data-action")&&S(e(t.target).attr("data-action"))}),i.on("moveScrollerNext",function(e){e.preventDefault(),S("next")}),i.on("moveScrollerPrevious",function(e){e.preventDefault(),S("previous")}),i.on("updateLayout",function(e){e.preventDefault(),E()}),i.hammer()},_=function(){e.subscribe("page/resize",function(){e(this).trigger("updateLayout")},i)};this.init=function(){Site.utils.cl(r),Site.utils.cl(r.timeUnit),Site.utils.cl("timeUnit: "+o),e("html.ie7").length>0&&(u=!1),E(),y(),_()}},i=function(){Site.events.createDelegatedEventListener("click",".scrollControls [data-action]","moveScroller"),Site.events.createDelegatedEventListener("swipeleft","[data-plugin=scroller]","moveScrollerNext"),Site.events.createDelegatedEventListener("swiperight","[data-plugin=scroller]","moveScrollerPrevious")},r=function(){e(t.selPlugin).each(function(){var e=new n(this);e.init()}),i(),Site.utils.cl("Site.Scroller.init called")};return{init:r}}(jQuery);var Site=Site||{};Site.images=function(e){"use strict";var t={},n=e("[data-image-load]"),i=function(t){var n=e(t),i=n.find("img.placeholder").eq(0),r=n.data("image-load"),o=n.data("image-type")||"inline",s=!1,a=new Image,c=function(t){var r=e(t),o=n.data("alt")||"image";r.attr("alt",o),i.length>0?i.attr("src",r.attr("src")).removeClass("placeholder").removeAttr("width").removeAttr("height"):n.prepend(r),n.addClass("imageLoaded"),window.setTimeout(function(){n.addClass("imageDisplayed")},100),s=!0},l=function(e){var t="url("+e+")",i=n.data("position"),r=n.data("background-color");n.addClass("imageLoaded").css("background-image",t).addClass("flexImage").addClass(i).css("background-color",r),Site.utils.cl("image loaded in background"),s=!0},u=function(){var t="src-"+Site.layout.getResponsiveSize(),i=n.data(t);a.src=i,"inline"===o?e(a).imagesLoaded(c(a)):"background"===o&&e(a).imagesLoaded(l(i))},d=function(){"inline"===o?Site.utils.isElementInView(n)&&s===!1&&u(n):"background"===o&&Site.utils.isElementInView(n.parent())&&s===!1&&u(n)},h=function(){n.on("loadLazyImage",function(e){e.preventDefault(),s===!1&&d(n)})},f=function(){Site.utils.cl(r),"click"!==r&&(e.subscribe("page/scroll",function(){e(this).trigger("loadLazyImage")},n),e.subscribe("page/resize",function(){e(this).trigger("loadLazyImage")},n),e.subscribe("layout/change",function(){e(this).trigger("loadLazyImage")},n),e.subscribe("page/load",function(){e(this).trigger("loadLazyImage")},n))};this.init=function(){"click"===r||("view"===r?d(n):"pageload"===r&&u(n)),h(),f()}},r=function(){Site.events.createDelegatedEventListener("click",".lazyLoader[data-image-load=click]","loadLazyImage")},o=function(){Site.utils.cl("Site.images initialised"),e(n).each(function(){var e=new i(this);e.init()}),r()};return{init:o}}(jQuery);var Site=Site||{};Site.showhide=function(e){"use strict";var t={selPlugin:"[data-plugin=showhide]",selAction:"[data-plugin=showhide] [data-action=toggle]",selContent:"[data-content=showhide]"},n=function(n){var i=e(n),r=i.find(t.selContent).eq(0),o=i.data("plugin-config"),s=o.animate||!1,a=o.speed||200,c=o.open||!1,l=function(){e.publish("layout/change")},u=function(){i.hasClass("isClosed")?s===!0?(r.slideDown(a,function(){l()}),i.removeClass("isClosed").addClass("isOpen")):(r.show(),i.removeClass("isClosed").addClass("isOpen"),l()):s===!0?(r.slideUp(a,function(){l()}),i.addClass("isClosed").removeClass("isOpen")):(r.hide(),i.addClass("isClosed").removeClass("isOpen"),l())},d=function(){c===!1&&i.addClass("isClosed")},h=function(){i.on("toggleShowHide",function(e){e.preventDefault(),u()})};this.init=function(){h(),d()}},i=function(){Site.events.createDelegatedEventListener("click",t.selAction,"toggleShowHide")},r=function(){Site.utils.cl("Site.showhide.init called"),e(t.selPlugin).each(function(){var e=new n(this);e.init()}),i()};return{init:r}}(jQuery);var Site=Site||{};Site.media=function(e){"use strict";var t="[data-plugin=lazyVideo]",n="[data-plugin=lazyVideo] a",i=function(t){var n=e(t),i=n.attr("data-video-id"),r=n.find("a"),o=n.data("loading"),s=e('<object width="400" height="300" type="movie" data="http://www.youtube.com/v/'+i+'?version=3&amp;hl=en_US&amp;rel=0"><param name="movie" value="http://www.youtube.com/v/'+i+'?version=3&amp;hl=en_US&amp;rel=0"></param><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/'+i+'?version=3&amp;hl=en_US&amp;rel=0" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object>'),a=function(){e(r).remove(),n.append(s).addClass("videoLoaded")},c=function(){Site.utils.isElementInView(n)&&a()},l=function(){n.on("loadLazyMedia",function(e){e.preventDefault(),n.hasClass("videoLoaded")||c()})},u=function(){"click"!==o&&(e.subscribe("page/scroll",function(){e(this).trigger("loadLazyMedia")},n),e.subscribe("page/resize",function(){e(this).trigger("loadLazyMedia")},n),e.subscribe("layout/change",function(){e(this).trigger("loadLazyMedia")},n),e.subscribe("page/load",function(){e(this).trigger("loadLazyMedia")},n))};this.init=function(){Site.utils.cl(o),"click"===o||("view"===o?c():a()),l(),u()}},r=function(){Site.events.createDelegatedEventListener("click",n,"loadLazyMedia")},o=function(){e(t).each(function(){var e=new i(this);e.init()}),r()},s=function(){Site.utils.cl("Site.media initialised"),o()};return{init:s}}(jQuery);var Site=Site||{};Site.loading=function(e){"use strict";var t=e("body"),n=100,i=function(){var i=function(){t.addClass("pageLoaded"),e.publish("page/loaded")};this.init=function(){var e=setTimeout(i,n)}},r=function(){Site.utils.cl("Site.loading initialised");var e=new i(this);e.init()};return{init:r}}(jQuery);var Site=Site||{};Site.analytics=function(e){"use strict";var t={},n=new RegExp("^((f|ht)tps?:)?//(?!"+location.host+")"),i="a.external",r="modalLinkExternal",o=function(t){var i=e(t),o=i.attr("href"),s,c=function(){s=n.test(o)?"external":"local",i.addClass(s)},l=function(){Site.utils.cl("track outbound link..."),i.hasClass(r)?a("Outbound Link","modal",o):(a("Outbound Link","click",o),void 0===i.attr("target")||"_blank"!==i.attr("target").toLowerCase()?setTimeout(function(){location.href=o},400):window.open(o,"_blank"))},u=function(){i.on("trackExternalLink",function(e){e.preventDefault(),l()})},d=function(){};this.init=function(){u(),d(),c()}},s=function(e){var t=e;"undefined"!=typeof ga?ga("send","pageview",t):"undefined"!=typeof _gaq?_gaq.push(["trackPageview"],e):Site.utils.cl("Google Analytics not available")},a=function(e,t,n){var i=e,r=t,o=n;"undefined"!=typeof ga?ga("send","event",i,r,o):"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent",i,r,o])},c=function(){e("a[href$='pdf']").on("click",function(){Site.utils.cl("PDF link tracked");var t=e(this).attr("href");s(t)})},l=function(t){var n=e(window).width(),i;i=n>768?"Desktop":n>520?"Tablet":"Phone","undefined"!=typeof ga?ga("set","dimension1",i):"undefined"!=typeof _gaq&&_gaq.push(["_setCustomVar",t,"Layout",i,3])},u=function(){},d=function(e){"undefined"!=typeof ga||"undefined"!=typeof _gaq&&_gaq.push(["_deleteCustomVar",e])},h=function(){Site.events.createDelegatedEventListener("click",i,"trackExternalLink")},f=function(e){var t=new o(e);t.init()},g=function(){Site.utils.cl("Site.analytics.init called"),c(),h(),e("a").each(function(){var e=new o(this);e.init()})};return{init:g,trackPageView:s,trackPageEvent:a,trackPageLoadInformation:u,deleteCustomVariable:d,createPageLink:f}}(jQuery);